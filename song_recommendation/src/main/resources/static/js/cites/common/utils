function getBaseURL(){var n=window.location,t="";return window.location.pathname.split("/")[1]==="proprep"&&(t=window.location.pathname.split("/")[1]+"/"),n.protocol+"//"+n.host+"/"+t}function getBaseURLWithoutSlash(){var n=window.location;return n.protocol+"//"+n.host}function getBaseApiURL(){var n=getBaseURL();return n+"api/"}function openLink(n,t){n.ctrlKey?window.open(t,"_blank"):window.location.href=t}function replaceHtmlContent(n,t){$(n).fadeOut(400,function(){$(n).html(t).fadeIn(400)})}function showSummaryMessage(n,t){$(n).fadeOut(200,function(){$(n).html('<div class="alert alert-danger">'+t+"<\/div>").fadeIn(200)})}function showSummaryMessages(n,t,i){var u=$(n),r="";$.each(t,function(n,t){r+=i?'<div class="alert alert-info">'+t+"<\/div>":'<div class="alert alert-danger">'+t+"<\/div>"});$(n).fadeOut(200,function(){$(n).html(r).fadeIn(200)})}function showAlertMessages(n,t){var u=$(n),r="",i;$.each(t,function(n,t){switch(t.mt){case 0:i="alert-success";break;case 1:i="alert-info";break;case 2:i="alert-warning";break;case 3:i="alert-danger"}r+='<div class="alert '+i+'">';t.t!=null&&(r+="<strong>"+t.t+"<\/strong><br />");r+=t.c+"<\/div>"});u.fadeOut(200,function(){u.html(r).fadeIn(200)})}function jsTreeSorting(n,t){return parseInt(n.attributes.order.value)>parseInt(t.attributes.order.value)?1:-1}function doFBLogin(){FB.login(function(){},{scope:"email,public_profile"})}function processLogin(n){if(n.AllowAccess){processCart();switch(n.LoginMessageType){default:window.location.href=getBaseURLWithoutSlash()+n.ReturnUrl}}else switch(n.LoginMessageType){case 0:okAlertDialog("<p>Email address does not exist<\/p>");break;case 1:okAlertDialog("This account already exist<br />Please use your username and password to login");break;case 2:okAlertDialog('<p>The password is incorrect,<br /><a data-toggle="modal" href="#forgot-password" onclick="$(\'#alert-dialog\').modal(\'hide\');">Click here to reset your password<\/a><\/p>');break;case 3:okAlertDialog("In order to login you need to use your facebook account");break;case 4:okAlertDialog("In order to login you need to use the email and password you use when you register to ProPrep");break;case 5:okAlertDialog("This user is blocked, please use Contact Us for unblock request");break;case 6:okAlertDialog("Dear student,<br />You must log in to one of the two latest computers are logged.<br />Sincerely,<br />ProPrep Staff.");break;case 7:okAlertDialog('The e-mail address Your Facebook account is not approved.<br />Check the subject of your account settings on Facebook, or alternatively contact Facebook <a href="http://www.facebook.com/help/contact.php?show_form=email_confirmation" target="_blank">this link<\/a>.<br />Sincerely,<br />ProPrep Staff.');break;case 8:okAlertDialog("An error occurred, please please contact us on Contact Us page")}}function addCourse(n){$.ajax({url:getBaseApiURL()+"Purchasing/AddCartCourse/"+n,async:!1,type:"POST",success:function(){updateCartCounter(!0)},error:function(n){okAlertDialog(n.responseText)}})}function removeCourse(n){$.ajax({url:getBaseApiURL()+"Purchasing/RemoveCartCourse/"+n,type:"DELETE",success:function(){updateCartCounter(!0);typeof reloadContent!="undefined"&&reloadContent()},error:function(n){okAlertDialog(n.responseText)}})}function addChapter(n,t){$.ajax({url:getBaseApiURL()+"Purchasing/AddCartCourseChapter/"+n,async:!1,type:"POST",success:function(){updateCartCounter(!0);$(t).effect("transfer",{to:$("#top-cart-frame"),className:"transfer-effect-warning"},1e3,function(){typeof reloadContent!="undefined"&&reloadContent(!1,!0)})},error:function(n){okAlertDialog(n.responseText)}})}function removeChapter(n){$.ajax({url:getBaseApiURL()+"Purchasing/RemoveCartCourseChapter/"+n,type:"DELETE",success:function(){updateCartCounter(!0);typeof reloadContent!="undefined"&&reloadContent()},error:function(n){okAlertDialog(n.responseText)}})}function fbRecommendations(){$.ajax({url:getBaseApiURL()+"FacebookRecommendations/AllBasic",data:{mixed:!0},success:function(n){var t,i;$.each(n,function(n,r){i=n==0?'<div class="media active border-bottom"><div class="pull-right"><img class="media-object" data-username='+r.Username+' src="https://graph.facebook.com/'+r.Username+'/picture?width=50&height=50" alt="Profile Picture" /><\/div>':n==1?'<div class="media active"><div class="pull-right"><img class="media-object" data-username='+r.Username+' src="https://graph.facebook.com/'+r.Username+'/picture?width=50&height=50" alt="Profile Picture" /><\/div>':'<div class="media"><div class="pull-right"><a href="https://www.facebook.com/'+r.Username+'" target="_blank"><img class="media-object" data-username='+r.Username+' alt="Profile Picture" /><\/a><\/div>';i+='<div class="media-body"><p class="media-heading text-primary">'+r.Name+"<\/p>";t=r.Recommendation;t=t.replace("\r\n","<br />");t=t.replace("\r","<br />");t=t.replace("\n","<br />");i+=t+"<\/div><\/div>";$("#success-stories-content").append(i)});setInterval("swapFBRecommendations()",1e4)}})}function swapFBRecommendations(){var r=$("#success-stories-content .active").first(),i=$("#success-stories-content .active").last(),n=i.next().length>0?i.next():$("#success-stories-content div.media:first"),u=n.next().length>0?n.next():$("#success-stories-content div.media:first"),t=n.find("img");t.attr("src","https://graph.facebook.com/"+t.data("username")+"/picture?width=50&height=50");t=u.find("img");t.attr("src","https://graph.facebook.com/"+t.data("username")+"/picture?width=50&height=50");r.fadeOut(400,function(){r.removeClass("active");r.removeClass("border-bottom");n.addClass("border-bottom");n.fadeIn(400).addClass("active")});i.fadeOut(400,function(){i.removeClass("active");u.fadeIn(400).addClass("active")})}function initMessages(){var i="#success-dialog",n,t;$(i).on("shown.bs.modal",function(){$(i+" .btn-ok").focus()});n="#message-dialog";$(n).on("shown.bs.modal",function(){$(n+" .btn-ok").focus()});t="#alert-dialog";$(t).on("shown.bs.modal",function(){$(t+" .btn-ok").focus()})}function okSuccessDialog(n,t){okDialogBase("#success-dialog",n,t)}function okMessageDialog(n,t){okDialogBase("#message-dialog",n,t)}function okCancelMessageDialog(n,t,i){okCancelDialogBase("#message-dialog",n,t,i)}function okAlertDialog(n,t){okDialogBase("#alert-dialog",n,t)}function okCancelAlertDialog(n,t,i){okCancelDialogBase("#alert-dialog",n,t,i)}function okDialogBase(n,t,i){var r=$(n+" .btn-ok"),u;r.unbind("click");r.show();i&&r.click(i);u=$(n+" .btn-cancel");u.unbind("click");u.hide();$(n+" .message-content").html(t);$(n).modal("show")}function okCancelDialogBase(n,t,i,r){var f=$(n+" .btn-ok"),u;f.unbind("click");f.show();i&&f.click(i);u=$(n+" .btn-cancel");u.unbind("click");u.show();r&&u.click(r);$(n+" .message-content").html(t);$(n).modal("show")}function processCart(){$.ajax({url:getBaseApiURL()+"Carts/ProcessCart",type:"POST",async:!1})}function updateCartCounter(n){var i=$("#top-cart-frame"),t=$(".in-cart-icon");$.ajax({url:getBaseApiURL()+"Purchasing/TopCart",async:!n,success:function(r){r.Total!=0?n?i.show(400,function(){t.hide(400,function(){t.html(r.Total).show(400)})}):(i.show(),t.html(r.Total).show()):n?t.hide(400,function(){t.html("");i.hide(400)}):(t.hide().html(""),i.hide())}})}